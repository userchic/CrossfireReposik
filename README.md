# Перестрелка

Данный репозиторий является продолжением давно выполненной моей курсовой работы 2 курса, которая была выполнена кое как.
## Смысл игры

Игра состоит в том, что несколько команд по сколько то человек противостоят друг другу. Они решают задачи и при этом они могут указать цель, которая при правильном ответе будет с некоторой вероятностью поражена выстрелом. Выстрел отнимет некоторое количество очков целевой команды.

Игра может кончиться по времени либо когда все команды решат все задачи.

Игра по-моему аналогов не имеет.

## КР 2 курса

Тогда было сделано не так много:

- Было создано 3 контроллера в которых по-моему была логика приложения.
- Использовался старый EF вместо EF Core потому что у еня тогда была VS2018, ну и версия ASP .Net Core была другая, та версия в которой ещё был файл StartUp. Возможно 5 версия
- БД была очень небольшая, 4 таблицы связанные последовательно в виде линии(ну или можно привести аналогию с деревом ид теории графов)
- Требования говорили что игра должна быть командной и онлайн, но этого не было. Игрок играл против генератора случайных чисел.
- в рамках игры был таймер, но он был на фронтэнде(в представлениях). То есть таймер был не постоянным и его значения таскались из одного представления игры в другое.
- В приложении не было аутентификации и авторизации. Была только их имитация.
- СУБД была MS SQL

## Отчёт
Сейчас в приложении:
- более менее работают 2 контроллера: домашний, который почти всегда используется не зарегистрированным пользователем и контроллер администратора.
- Есть представления для этих контроллеров, эта часть программы отлажена на уровне проверки сработают ли кнопки в нормальной ситуации, парочка из кнопок ещё не приводит к видимым изменениям из за чего не возможно понять была ли удален задача.
- Используется EF Core, База данных состоит из где-то 15 таблиц из которых по-моему 3 таблицы это словари и еще 3 таблицы это отношения многие ко многим. 
- базе данных соответствуют модели, к которым создано 10 репозиториев с интерфейсами(это 10 Scoped сервисов)
- СУБД PostgreSQL, выбрана для того чтобы использовать что-то новое

Для игрового процесса добавлены и разрабатываются: 
- хаб для подключения по TCP соединению чтобы отправлять игрокам сообщения об отправленных ответах 
- поскольку игры на самом деле запланировываются на будущее, добавлен и разрабатывается менеджер игр, который пока что будет Singleton сервисом. Он будет хранить список запланированных игр, добавлять в этот список новые игры при создании и игры будут вести отсчёт времени до своего начала и затем до своего конца после чего они сообщат менеджеру игр по ссылке что они закончились и он сообщит хабу об этом. Хабу об этом нужно знать потому что если игра закончится не по таймеру нужно всем игрокам сообщить, а ведь игра может закончиться когда игроки всё решат.